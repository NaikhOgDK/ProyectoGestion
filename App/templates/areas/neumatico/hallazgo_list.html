{% extends 'base.html' %}
{% block content %}
<h1>Hallazgos</h1>
<a href="{% url 'hallazgo_create' %}" class="btn btn-primary btn-lg mb-3">Crear Hallazgo</a>

<!-- Tabla con los hallazgos usando Bootstrap -->
<table class="table table-striped mt-3">
    <thead>
        <tr>
            <th>Hallazgo</th>
            <th>Vehículo</th>
            <th>Posición</th>
            <th>Nivel de Riesgo</th>
            <th>Fecha Inspección</th>
            <th>Responsable</th>
            <th>Estado de Cierre</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for hallazgo in hallazgos %}
        <tr>
            <td>{{ hallazgo.hallazgo }}</td>
            <td>{{ hallazgo.vehiculo }}</td>
            <td>{{ hallazgo.posicion_neumatico }}</td>
            <td>
                {% if hallazgo.nivel_riesgo == 'Alto' %}
                <span class="badge bg-danger">{{ hallazgo.nivel_riesgo }}</span>
                {% elif hallazgo.nivel_riesgo == 'Medio' %}
                <span class="badge bg-warning">{{ hallazgo.nivel_riesgo }}</span>
                {% else %}
                <span class="badge bg-info">{{ hallazgo.nivel_riesgo }}</span>
                {% endif %}
            </td>
            <td>{{ hallazgo.fecha_inspeccion }}</td>
            <td>{{ hallazgo.responsable }}</td>
            <td>
                {% if hallazgo.estado_cierre == 'Abierto' %}
                <span class="badge bg-success">Abierto</span>
                {% else %}
                <span class="badge bg-danger">Cerrado</span>
                {% endif %}
            </td>
            <td>
                <a href="{% url 'hallazgo_detail' hallazgo.pk %}" class="btn btn-info btn-sm">Ver</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
